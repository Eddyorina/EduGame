<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Catalog</title>
	<link rel="stylesheet" href="dependencies/bootstrap.min.css">
	<script src="dependencies/react.min.js"></script>
	<script src="dependencies/react-dom.min.js"></script>
	<script src="dependencies/babel.min.js"></script>
	<!-- <link rel="stylesheet" type="text/css" href="home.css"> -->
	<!-- <link rel="stylesheet" type="text/css" href="catalog.css"> -->
</head>
<body>
	
	<nav class="navbar navbar-dark bg-dark navbar-expand-lg">
		<a class="navbar-brand heading" style="font-size: 25px" href="#">EduGame</a>
		<div class="collapse navbar-collapse justify-content-end mr-3" id="navbarNavDropdown">
			<ul class="navbar-nav">
				<li class="nav-item dropdown">
					<a class="nav-link dropdown-toggle active" href="#" id="userMenuDropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
						User's name
					</a>
					<div class="dropdown-menu" aria-labelledby="userMenuDropdown">
						<a class="dropdown-item" href="#">Log out</a>
					</div>
				</li>
			</ul>
		</div>
		<div>
			<form class="form-inline my-2 my-lg-0">
				<input class="form-control mr-sm-2" type="search" placeholder="eg. Math or Ice Commando" aria-label="Search">
				<button class="btn btn-primary my-2 my-sm-0" type="submit">Search</button>
			</form>
		</div>
		
	</nav>

	<script src="jquery-3.3.1.js"></script>
	<script src="dependencies/popper.min.js"></script>
	<script src="dependencies/bootstrap.min.js"></script>
	<script src="jquery-validation-1.17.0/dist/jquery.validate.min.js"></script>
	<script type="text/javascript">
		var email = localStorage.getItem("useremail");
		var firstname = localStorage.getItem("firstname");
		var lastname = localStorage.getItem("lastname");

		var games;

		$("#userMenuDropdown").text(firstname + " " + lastname);


		function getNewGames(){
			return new Promise(
				() => {
					$.ajax({
						url: "server/CatalogUtility.php",
						method: "POST",
						data: {new_games: 1},
						success: (data, textStatus, jqXHR) => {
							if (!data[error]){
								games = data["games"];
							} else {
								console.log(data["error_message"]);
							}
						},
						error: (jqXHR, textStatus, errorThrown) => {
							console.log(errorThrown);
						},
						dataType: "json"
					})
				}
			);
		};

		getNewGames().then(()=>console.log(games));
	</script>
		</body>
</html>